{"version":3,"sources":["scripts/main.js"],"names":["notifLeft","tHead","document","querySelector","tH","querySelectorAll","tBody","offices","Set","rows","map","each","cells","outerHTML","sort","join","replaceAll","officesHTML","inText","innerText","toLowerCase","usdNum","str","Number","replace","prevSelected","curSort","addEventListener","ev","sortByIndex","indexOf","target","tBodyData","reverse","append","a","b","aIn","bIn","localeCompare","classList","remove","closest","add","pushNotification","title","description","type","notification","createElement","inTitle","inDescription","body","insertAdjacentElement","dataset","qa","style","top","left","position","setTimeout","errorSalary","errorAge","errorInput","successEdit","successSubmit","warnNoEdit","contains","cell","cellEdit","cellData","cellIndex","max","width","value","innerHTML","focus","keypress","key","blur","toLocaleString","trim","length","insertAdjacentHTML","form","window","getBoundingClientRect","textTransform","submit","preventDefault","formData","FormData","get","reset"],"mappings":"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","file":"main.7b8b5ca8.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\n// write code here\nconst tHead = document.querySelector('thead');\nconst tH = tHead.querySelectorAll('th');\n\nconst tBody = document.querySelector('tbody');\nlet notifLeft;\n\nconst offices = [...new Set([...tBody.rows]\n  .map(each => each.cells[2].outerHTML))]\n  .sort().join('')\n  .replaceAll('td', 'option');\n\nconst officesHTML = [...new Set([...tBody.rows]\n  .map(each => {\n    const inText = each.cells[2].innerText;\n\n    return `<option value=\"${inText.toLowerCase()}\">${inText}</option>`;\n  }))].join('\\n');\n\nfunction usdNum(str) {\n  return Number(str.replace(/\\D/g, ''));\n}\n\n// 2-way sort\nlet curSort = Number;\n\ntHead.addEventListener('click', (ev) => {\n  const sortByIndex = [...tH].indexOf(ev.target);\n  const tBodyData = [...tBody.rows];\n\n  // reverse sorting if same header clicked\n  if (curSort === sortByIndex) {\n    tBodyData.reverse();\n    tBody.append(...tBodyData);\n\n    return;\n  }\n\n  tBodyData.sort((a, b) => {\n    const aIn = a.cells[sortByIndex].innerText;\n    const bIn = b.cells[sortByIndex].innerText;\n\n    return usdNum(aIn) - usdNum(bIn)\n      || aIn.localeCompare(bIn);\n  });\n\n  curSort = sortByIndex;\n\n  tBody.append(...tBodyData);\n});\n\n// row selected\nlet prevSelected;\n\ntBody.addEventListener('click', (ev) => {\n  if (prevSelected) {\n    prevSelected.classList.remove('active');\n  };\n\n  ev.target.closest('tr')\n    .classList.add('active');\n\n  prevSelected = ev.target.closest('tr');\n});\n\n// utility notifications\nconst pushNotification = (title, description, type) => {\n  const notification = document.createElement('div');\n  const inTitle = document.createElement('h2');\n  const inDescription = document.createElement('p');\n\n  document.body.insertAdjacentElement('beforeend', notification);\n\n  notification.dataset.qa = 'notification';\n  notification.style.top = '450px';\n  notification.style.left = notifLeft + 'px';\n  notification.classList.add('notification', type);\n  notification.style.position = 'absolute';\n\n  notification.append(inTitle);\n  inTitle.classList.add('title');\n  inTitle.append(title);\n\n  notification.append(inDescription);\n  inDescription.append(description);\n\n  setTimeout(() => {\n    notification.remove();\n  }, 2000);\n};\n\nconst errorSalary = () => {\n  pushNotification('❌ Salary validation',\n    'salary must be [1...2,000,000]', 'error');\n};\nconst errorAge = () => {\n  pushNotification('❌ Age validation',\n    'age must be [18...90]', 'error');\n};\nconst errorInput = () => {\n  pushNotification('❌ input length',\n    'input shall be min 4 chars OR a positive integer', 'error');\n};\nconst successEdit = () => {\n  pushNotification('✅ data changed', '🎉', 'success');\n};\nconst successSubmit = () => {\n  pushNotification('✅ data submitted', '🎉', 'success');\n};\nconst warnNoEdit = () => {\n  pushNotification('no data changed', '', 'warning');\n};\n\n// edit table\ntBody.addEventListener('dblclick', (ev) => {\n  if (ev.target.classList.contains('cell-input')) {\n    return;\n  }\n  // ^prevent double-click set to '' while in edit mode\n\n  const cell = ev.target.closest('td');\n  const cellData = cell.innerText;\n\n  let cellEdit;\n\n  // input types per value type\n  switch (tH[cell.cellIndex].innerText) {\n    case 'Salary':\n    case 'Age':\n      cell.innerText = '';\n      cellEdit = document.createElement('input');\n      cellEdit.type = 'number';\n      cellEdit.max = '2000000';\n      cellEdit.style.width = '75%';\n      cellEdit.value = usdNum(cellData);\n      break;\n    case 'Office':\n      cell.innerText = '';\n      cellEdit = document.createElement('select');\n      cellEdit.innerHTML = offices;\n      cellEdit.value = cellData;\n      break;\n    default:\n      cell.innerText = '';\n      cellEdit = document.createElement('input');\n      cellEdit.type = 'text';\n      cellEdit.value = cellData;\n  }\n\n  cellEdit.classList.add('cell-input');\n  cell.append(cellEdit);\n  cellEdit.focus();\n\n  // cellEdit.value validation and processing on blur and Enter\n  cellEdit.addEventListener('keydown', (keypress) => {\n    if (keypress.key === 'Enter') {\n      cellEdit.blur();\n    }\n  });\n\n  cellEdit.addEventListener('blur', () => {\n    cellEdit.remove();\n\n    if (cellEdit.value === cellData) {\n      cell.innerText = cellData;\n\n      return warnNoEdit();\n    }\n\n    switch (tH[cell.cellIndex].innerText) {\n      case 'Salary':\n        if (cellEdit.value < 1 || cellEdit.value > 2000000) {\n          cell.innerText = cellData;\n\n          return errorSalary();\n        }\n        cell.innerText = '$' + Number(cellEdit.value).toLocaleString('en-US');\n        successEdit();\n        break;\n\n      case 'Age':\n        if (cellEdit.value < 18 || cellEdit.value > 90) {\n          cell.innerText = cellData;\n\n          return errorAge();\n        }\n        cell.innerText = +cellEdit.value;\n        successEdit();\n        break;\n\n      default:\n        if (!cellEdit.value || +cellEdit.value <= 0\n          || cellEdit.value.trim().length < 4) {\n          cell.innerText = cellData;\n\n          return errorInput();\n        }\n\n        cell.innerText = cellEdit.value;\n\n        return successEdit();\n    }\n  });\n});\n\n// add form with client-side validations\ndocument.body.insertAdjacentHTML('beforeend', `\n<form class=\"new-employee-form\" >\n  <label for=\"name\">\n    Name:\n    <input id=\"name\"\n      required\n      name=\"name\"\n      type=\"text\"\n      data-qa=\"name\"\n\n      pattern=\"[A-z]{4,}(?: [A-z]+)*\" title=\"min 4 chars, no digits\"\n      placeholder=\"min 4 chars, no digits\"\n    >\n  </label>\n  <label for=\"position\">\n    Position:\n    <input id=\"position\"\n      required\n      name=\"position\"\n      type=\"text\"\n      data-qa=\"position\"\n\n      pattern=\"[A-z]{4,}(?: [A-z]+)*\" title=\"min 4 chars, no digits\"\n      placeholder=\"min 4 chars, no digits\"\n    >\n  </label>\n  <label for=\"office\">\n    Office:\n    <select id=\"office\"\n      required\n      name=\"office\"\n      data-qa=\"office\"\n    >\n    </select>\n  </label>\n  <label for=\"age\">\n    Age:\n    <input id=\"age\"\n      required\n      name=\"age\"\n      type=\"number\"\n      data-qa=\"age\"\n\n      min=\"18\"\n      max=\"90\"\n      step=\"1\"\n      title=\"age must be [18...90]\"\n      placeholder=\"[18...90]\"\n    >\n  </label>\n  <label for=\"salary\">\n    Salary:\n    <input id=\"salary\"\n      required\n      name=\"salary\"\n      type=\"number\"\n      data-qa=\"salary\"\n\n      min=\"100\"\n      max=\"2000000\"\n      step=\"100\"\n    >\n  </label>\n  <button id=\"addRecord\">Add record</button>\n</form>\n`);\n\n// add offices dropdown options\nconst form = document.querySelector('form');\n\nform.querySelector('#office')\n  .insertAdjacentHTML('beforeend', officesHTML);\n\n// set the notification.left === form.left\nwindow.addEventListener('resize', ev => {\n  notifLeft = form.getBoundingClientRect().left;\n});\n\n// form submit\ntBody.style.textTransform = 'capitalize';\n\nform.addEventListener('submit', submit => {\n  // preventing page reload to use insertAdjacentHTML\n  submit.preventDefault();\n\n  const formData = new FormData(form);\n\n  tBody.insertAdjacentHTML('beforeend',\n    `<tr>\n      <td>${formData.get('name')}</td>\n      <td>${formData.get('position')}</td>\n      <td>${formData.get('office')}</td>\n      <td>${Number(formData.get('age'))}</td>\n      <td>$${Number(formData.get('salary')).toLocaleString('en-US')}</td>\n    </tr>`\n  );\n\n  successSubmit();\n  form.reset();\n});\n"]}